# Домашнее задание к занятию «Хранение в K8s. Часть 1»

## Задание 1

Что нужно сделать

Создать Deployment приложения, состоящего из двух контейнеров и обменивающихся данными.


   ### Создать Deployment приложения, состоящего из контейнеров busybox и multitool.

   Создал Deployment приложения, состоящего из контейнеров busybox и multitool.
   
   ### Сделать так, чтобы busybox писал каждые пять секунд в некий файл в общей директории.

   Чтобы busybox писал данные каждые пять секунд в некий файл в общей директории, использую команду создающую общую директорию и общий файл. Далее в созданный файл каждые пять секунд будет записываться сообщение "Test message".
   
   ### Обеспечить возможность чтения файла контейнером multitool.
   
Для возможности чтения файла контейнером multitool, в манифесте Deployment указал общую с контейнером busybox директорию, читать файл буду с помощью команды tail
   
   ### Продемонстрировать, что multitool может читать файл, который периодоически обновляется.

Проверю, запишутся ли данные в файл контейнером busybox и будут ли они доступны контейнеру multitool.

Применяю deployment и проверяю данные из контейнеров

![изображение](https://github.com/IOSorokin/Kubernetes/assets/148979909/1c97b79a-56b3-4acc-b9fd-6e00ff46433e)

Вижу, что из обоих контейнеров пода файл виден, доступен, в него действительно записываются данные каждые 5 секунд.

Также можно проверить, читает ли контейнер multitool файл success.txt, посмотрев его лог:

![изображение](https://github.com/IOSorokin/Kubernetes/assets/148979909/413f3299-87a7-4443-94d8-3fda2bb4cc8b)

Видно что multitool читает файл
   
   ### Предоставить манифесты Deployment в решении, а также скриншоты или вывод команды из п. 4.

Ссылка на манифест: https://github.com/IOSorokin/Kubernetes/blob/main/1.6/YAML/deployment.yaml


## Задание 2

Что нужно сделать

Создать DaemonSet приложения, которое может прочитать логи ноды.

   ### Создать DaemonSet приложения, состоящего из multitool.
   
Создал манифест для daemonset приложения которое может прочесть логи multitool. Применяю манифест, проверяю. 

![изображение](https://github.com/IOSorokin/Kubernetes/assets/148979909/c96172e5-cfac-453c-9389-55d76f77d577)

   ### Обеспечить возможность чтения файла /var/log/syslog кластера MicroK8S.

Для обеспечения возможность чтения файла /var/log/syslog кластера MicroK8S внутри контейнера используем параметр subPath, который позволит монтировать не всю директорию /var/log c машины - кластера MicroK8S, а именно один файл syslog. Также буду использовать параметр readOnly, чтобы избежать проблем с доступом к файл syslog, находящемуся на машине - кластере MicroK8S.

   ### Продемонстрировать возможность чтения файла изнутри пода.

Проверю возможность чтения файла изнутри подаж. 

![изображение](https://github.com/IOSorokin/Kubernetes/assets/148979909/6baeac8a-ea48-43eb-abd5-ba611333dd6e)

Вижу,что в контейнере пода присутствует директория /nodes-logs/ с файлом syslog, который примонтирован из машины - кластера MicroK8S.
   
   ### Предоставить манифесты Deployment, а также скриншоты или вывод команды из п. 2.

Ссылка на манифест:  https://github.com/IOSorokin/Kubernetes/blob/main/1.6/YAML/daemonset.yaml
